version: 3
projects:
- name: tf-atlantis-elk
  dir: ./terraform
  workflow: custom

workflows:
  custom:
    plan:
      steps:
      - init
      - plan:
          vars:
            github_user: "${{ .Vars.github_user }}"
            github_token: "${{ .Vars.github_token }}"
            github_secret: "${{ .Vars.github_secret }}"

    apply:
      steps:
      - apply:
          vars:
            github_user: "${{ .Vars.github_user }}"
            github_token: "${{ .Vars.github_token }}"
            github_secret: "${{ .Vars.github_secret }}"
